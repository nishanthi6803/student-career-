{% extends "base.html" %}

{% block title %}Personality NLP Engine{% endblock %}

{% block content %}
<div class="row">
    <div class="col-lg-6">
        <div class="glass-card h-100">
            <h4><i class="fas fa-feather-pointed me-2 text-primary"></i>Self-Expression Profiling</h4>
            <p class="small text-muted mb-4">Describe yourself, your goals, and your philosophy. Our NLP engine will
                analyze your personality traits.</p>
            <form action="{{ url_for('student.personality') }}" method="POST">
                <div class="mb-3">
                    <textarea name="description" class="form-control" rows="8"
                        placeholder="E.g., I am a highly motivated problem solver who enjoys collaborative environments and has a passion for building scalable systems..."
                        required></textarea>
                </div>
                <button type="submit" class="btn btn-ai w-100">Analyze Personality</button>
            </form>
        </div>
    </div>

    <div class="col-lg-6">
        {% if result %}
        <div class="glass-card">
            <h4><i class="fas fa-chart-radar me-2 text-info"></i>Trait Visualization</h4>
            <div style="max-height: 350px;">
                <canvas id="personalityChart"></canvas>
            </div>
            <div class="text-center mt-4">
                <h5 class="text-muted">Dominant Trait</h5>
                <div class="badge bg-primary fs-5 px-4 py-2">{{ result.dominant_trait }}</div>
            </div>
        </div>
        {% else %}
        <div class="glass-card text-center py-5 h-100 d-flex flex-column justify-content-center">
            <i class="fas fa-brain fa-4x text-muted mb-3"></i>
            <h5>The Mind Explorer</h5>
            <p class="text-muted">Submit your self-description to see your personality radar chart.</p>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}

{% block scripts %}
{% if result %}
<script>
    const ctx = document.getElementById('personalityChart').getContext('2d');
    new Chart(ctx, {
        type: 'radar',
        data: {
            labels: ['Openness', 'Conscientiousness', 'Extraversion', 'Agreeableness', 'Stability'],
            datasets: [{
                label: 'Personality Trait Factor',
                data: [
                    {{ result.traits.Openness }},
            {{ result.traits.Conscientiousness }},
                    {{ result.traits.Extraversion }},
        {{ result.traits.Agreeableness }},
        {{ result.traits['Emotional Stability'] }}
                ],
        backgroundColor: 'rgba(138, 43, 226, 0.3)',
        borderColor: '#8a2be2',
        pointBackgroundColor: '#00d2ff',
        borderWidth: 2
            }]
        },
        options: {
        scales: {
            r: {
                angleLines: { color: 'rgba(255,255,255,0.1)' },
                grid: { color: 'rgba(255,255,255,0.1)' },
                pointLabels: { color: '#a0a0c0' },
                ticks: { display: false },
                suggestedMin: 0, suggestedMax: 10
            }
        },
        plugins: { legend: { display: false } }
    }
    });
</script>
{% endif %}
{% endblock %}